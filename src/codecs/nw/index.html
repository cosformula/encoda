<html lang="en">

  <head>
    <title>Noweb codec</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://unpkg.com/@stencila/thema@2/dist/themes/stencila/styles.css"
      rel="stylesheet">
    <script src="https://unpkg.com/@stencila/thema@2/dist/themes/stencila/index.js"
      type="text/javascript"></script>
    <script
      src="https://unpkg.com/@stencila/components@&lt;=1/dist/stencila-components/stencila-components.esm.js"
      type="module"></script>
    <script
      src="https://unpkg.com/@stencila/components@&lt;=1/dist/stencila-components/stencila-components.js"
      type="text/javascript" nomodule=""></script>
  </head>

  <body>
    <main role="main">
      <article itemscope="" itemtype="http://schema.org/Article" data-itemscope="root">
        <h1 itemprop="headline">Noweb codec</h1>
        <meta itemprop="image"
          content="https://via.placeholder.com/1200x714/dbdbdb/4a4a4a.png?text=Noweb%20codec"><span
          itemscope="" itemtype="http://schema.org/Organization" itemprop="publisher">
          <meta itemprop="name" content="Unknown"><span itemscope=""
            itemtype="http://schema.org/ImageObject" itemprop="logo">
            <meta itemprop="url"
              content="https://via.placeholder.com/600x60/dbdbdb/4a4a4a.png?text=Unknown">
          </span>
        </span>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Noweb (<code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.nw</code>) is a collection of binaries
          for literate programming with LaTeX which inspired the more widely used <a
            href="https://en.wikipedia.org/wiki/Sweave" itemscope=""
            itemtype="http://schema.stenci.la/Link">Sweave</a> and the <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.Rnw</code> format.</p>
        <h3 itemscope="" itemtype="http://schema.stenci.la/Heading" id="supported-syntax">Supported
          syntax</h3>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">This codec build on the <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">latex</code> codec so
          supports all LaTeX syntax that that codec supports. It adds support for Noweb style <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>s:</p>
        <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>&lt;&lt;&gt;&gt;=
// some code here
@</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Each <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code> can be given an <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">id</code> property:</p>
        <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>&lt;&lt;someid&gt;&gt;=
plot(data)
@</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">If the <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">id</code> ends with a <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">\.\w+</code> regex pattern (e.g. <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.py</code>, <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.r</code>) then the letters
          will be used as the <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>&#39;s <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">programmingLanguage</code>
          e.g.</p>
        <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>&lt;&lt;first.py&gt;&gt;=
import pandas
@</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">For <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.Rnw</code> files all <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>s are assumed to have
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">programmingLanguage:
            r</code> unless explicitly overridden.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">In Noweb it is possible to
          declare that a <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code> is dependant on another
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code> e.g.
        </p>
        <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>&lt;&lt;second.py&gt;&gt;=
&lt;&lt;first.py&gt;&gt;
pandas.read_csv(&#39;mydata.csv&#39;)
@</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Currently, this explicit
          declaration of a dependency between <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>s is not supported
          pending forthcoming work on enabling dependency analysis and reactivity in Stencila
          documents.</p>
        <h3 itemscope="" itemtype="http://schema.stenci.la/Heading" id="installing-noweb">Installing
          Noweb</h3>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">You can install Noweb to get a
          better idea of how it works.</p>
        <blockquote itemscope="" itemtype="http://schema.stenci.la/QuoteBlock">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">ðŸ’¬ Note: there is a way to
            install Noweb with Homebrew, but the repositories seem to be out of date and not
            maintained.</p>
        </blockquote>
        <h4 itemscope="" itemtype="http://schema.stenci.la/Heading" id="pre-requisites">
          Pre-requisites:</h4>
        <ul itemscope="" itemtype="http://schema.org/ItemList">
          <li itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
            <meta itemprop="position" content="1">
            <meta itemprop="url" content="#1">MacTeX: downloaded .pkg <a
              href="https://www.wellesley.edu/lts/techsupport/latex/latexmac" itemscope=""
              itemtype="http://schema.stenci.la/Link">here</a>. This installs LaTeX in <code
              itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">/usr/local/texlive/2018/</code>.
          </li>
          <li itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
            <meta itemprop="position" content="2">
            <meta itemprop="url" content="#2">CTAN noweb package: download <a
              href="https://www.ctan.org/pkg/noweb" itemscope=""
              itemtype="http://schema.stenci.la/Link">here</a> and unzip.
          </li>
          <li itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
            <meta itemprop="position" content="3">
            <meta itemprop="url" content="#3"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">noweb.sty</code>: copy content from <a
              href="https://www.cs.tufts.edu/~nr/toolkit/working/spe/noweb.sty" itemscope=""
              itemtype="http://schema.stenci.la/Link">here</a>, then save into <code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">noweb.sty</code> somewhere.
          </li>
        </ul>
        <h4 itemscope="" itemtype="http://schema.stenci.la/Heading" id="installation-instructions">
          Installation instructions</h4>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Unzip the noweb package, go to
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">src/</code>, open <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Makefile</code>, and remove
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">-ansi</code> from <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CC</code> flag.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Then from <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">src</code> still, run the executable
          script <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">./awkmake
            gawk</code>; this will tell noweb that you&#39;re going to use &quot;gawk&quot; rather
          than &quot;nawk&quot; when parsing text.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">In order to compile, do <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">make boot</code> and <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">sudo make all
            install</code> from <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">src</code>.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Noweb binaries will be
          installed in <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">/usr/local/noweb/</code>. Add this path
          to your <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">PATH</code>
          environmental variable in <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.bashrc</code> (Linux) or <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.bash_profile</code>
          (MacOS) if you want.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Then you need to place the
          LaTeX noweb style (<code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.sty</code>) file in the right folder so
          that your LaTeX binary can use it. On my machine, I placed it in <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">/usr/local/texlive/2018/texmf-dist/tex/latex/base</code>.
          Note that after placing this file, you need to call <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">sudo texhash</code>. The <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">texhash</code> binary will
          record all the TeX relevant files into a database that LaTeX then consults when compiling
          a <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.tex</code> file.</p>
        <h3 itemscope="" itemtype="http://schema.stenci.la/Heading" id="testing-noweb">Testing Noweb
        </h3>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">If installation went well, you
          can go to <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">/usr/local/noweb/examples/</code>, and
          try:</p>
        <pre class="language-bash" itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>noweave primes.nw &gt; primes.tex
latex primes.tex
open primes.dvi</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Alternatively, do <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">pdflatex primes.tex</code>,
          and open the resulting .pdf in whatever viewer you use.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Here&#39;s an example of a
          simple <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">hello_in_c.nw</code> file containing C
          code:</p>
        <pre class="language-latex" itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>\section{A C example}

&lt;&lt;hello.c&gt;&gt;=
/*
  &lt;&lt;license&gt;&gt;
*/
#include &lt;stdio.h&gt;

int main(int argc, char *argv[]) {
  printf(&quot;Hello World!\n&quot;);
  return 0;
}
@

\noindent and that&#39;s it.</code></pre>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Note how the code chunk is
          padded by some LaTeX code above and below, but <strong itemscope=""
            itemtype="http://schema.stenci.la/Strong">there is no</strong> LaTeX preamble code, or
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">\documentclass</code>
          or <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">\begin{document}</code> or <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">\end{document}</code>. All
          of this is added automatically by <em itemscope=""
            itemtype="http://schema.stenci.la/Emphasis">noweave</em> binary, as well as code for
          loading up the Noweb style file <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">\usepackage{noweb}</code>.</p>
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Now we can weave this <code
            itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.nw</code> file into a
          <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">.tex</code> file,
          compile it, and open the <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">.pdf</code>:</p>
        <pre class="language-bash" itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code>noweave hello_in_c.nw &gt; hello_in_c.tex
latex hello_in_c.tex
pdflatex hello_in_c.tex
open hello_in_c.pdf</code></pre>
      </article>
    </main>
  </body>

</html>