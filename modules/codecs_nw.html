<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>codecs/nw | @stencila/encoda</title>
	<meta name="description" content="Documentation for @stencila/encoda">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
	<script async src="../assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">@stencila/encoda</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../modules.html">@stencila/encoda</a>
				</li>
				<li>
					<a href="codecs_nw.html">codecs/nw</a>
				</li>
			</ul>
			<h1>Module codecs/nw</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel tsd-comment">
				<div class="tsd-comment tsd-typography">
					<div class="lead">
						<a href="#noweb-codec" id="noweb-codec" style="color: inherit; text-decoration: none;">
							<h1>Noweb codec</h1>
						</a>
						<p>Noweb (<code>.nw</code>) is a collection of binaries for literate programming with LaTeX which inspired the more widely used <a href="https://en.wikipedia.org/wiki/Sweave">Sweave</a> and the <code>.Rnw</code> format.</p>
						<a href="#supported-syntax" id="supported-syntax" style="color: inherit; text-decoration: none;">
							<h2>Supported syntax</h2>
						</a>
						<p>This codec build on the <code>latex</code> codec so supports all LaTeX syntax that that codec supports. It adds support for Noweb style <code>CodeChunk</code>s:</p>
						<pre><code><span style="color: #000000">&lt;&lt;&gt;&gt;=</span>
<span style="color: #008000">// some code here</span>
<span style="color: #000000">@</span>
</code></pre>
						<p>Each <code>CodeChunk</code> can be given an <code>id</code> property:</p>
						<pre><code><span style="color: #000000">&lt;&lt;</span><span style="color: #001080">someid</span><span style="color: #000000">&gt;&gt;=</span>
<span style="color: #795E26">plot</span><span style="color: #000000">(</span><span style="color: #001080">data</span><span style="color: #000000">)</span>
<span style="color: #000000">@</span>
</code></pre>
						<p>If the <code>id</code> ends with a <code>\.\w+</code> regex pattern (e.g. <code>.py</code>, <code>.r</code>) then the letters will be used as the <code>CodeChunk</code>&#39;s <code>programmingLanguage</code> e.g.</p>
						<pre><code><span style="color: #000000">&lt;&lt;</span><span style="color: #001080">first</span><span style="color: #000000">.</span><span style="color: #001080">py</span><span style="color: #000000">&gt;&gt;=</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">pandas</span>
<span style="color: #000000">@</span>
</code></pre>
						<p>For <code>.Rnw</code> files all <code>CodeChunk</code>s are assumed to have <code>programmingLanguage: r</code> unless explicitly overridden.</p>
						<p>In Noweb it is possible to declare that a <code>CodeChunk</code> is dependant on another <code>CodeChunk</code> e.g.</p>
						<pre><code><span style="color: #000000">&lt;&lt;</span><span style="color: #001080">second</span><span style="color: #000000">.</span><span style="color: #001080">py</span><span style="color: #000000">&gt;&gt;=</span>
<span style="color: #000000">&lt;&lt;</span><span style="color: #001080">first</span><span style="color: #000000">.</span><span style="color: #001080">py</span><span style="color: #000000">&gt;&gt;</span>
<span style="color: #001080">pandas</span><span style="color: #000000">.</span><span style="color: #795E26">read_csv</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;mydata.csv&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">@</span>
</code></pre>
						<p>Currently, this explicit declaration of a dependency between <code>CodeChunk</code>s is not supported pending forthcoming work on enabling dependency analysis and reactivity in Stencila documents.</p>
						<a href="#installing-noweb" id="installing-noweb" style="color: inherit; text-decoration: none;">
							<h2>Installing Noweb</h2>
						</a>
						<p>You can install Noweb to get a better idea of how it works.</p>
						<blockquote>
							<p>ðŸ’¬ Note: there is a way to install Noweb with Homebrew, but the repositories seem to be out of date and not maintained.</p>
						</blockquote>
						<a href="#pre-requisites" id="pre-requisites" style="color: inherit; text-decoration: none;">
							<h3>Pre-requisites:</h3>
						</a>
						<ul>
							<li>MacTeX: downloaded .pkg <a href="https://www.wellesley.edu/lts/techsupport/latex/latexmac">here</a>. This installs LaTeX in <code>/usr/local/texlive/2018/</code>.</li>
							<li>CTAN noweb package: download <a href="https://www.ctan.org/pkg/noweb">here</a> and unzip.</li>
							<li><code>noweb.sty</code>: copy content from <a href="https://www.cs.tufts.edu/~nr/toolkit/working/spe/noweb.sty">here</a>, then save into <code>noweb.sty</code> somewhere.</li>
						</ul>
						<a href="#installation-instructions" id="installation-instructions" style="color: inherit; text-decoration: none;">
							<h3>Installation instructions</h3>
						</a>
						<p>Unzip the noweb package, go to <code>src/</code>, open <code>Makefile</code>, and remove <code>-ansi</code> from <code>CC</code> flag.</p>
						<p>Then from <code>src</code> still, run the executable script <code>./awkmake gawk</code>; this will tell noweb that you&#39;re going to use &quot;gawk&quot; rather than &quot;nawk&quot; when parsing text.</p>
						<p>In order to compile, do <code>make boot</code> and <code>sudo make all install</code> from <code>src</code>.</p>
						<p>Noweb binaries will be installed in <code>/usr/local/noweb/</code>. Add this path to your <code>PATH</code> environmental variable in <code>.bashrc</code> (Linux) or <code>.bash_profile</code> (MacOS) if you want.</p>
						<p>Then you need to place the LaTeX noweb style (<code>.sty</code>) file in the right folder so that your LaTeX binary can use it.
							On my machine, I placed it in <code>/usr/local/texlive/2018/texmf-dist/tex/latex/base</code>.
							Note that after placing this file, you need to call <code>sudo texhash</code>. The <code>texhash</code> binary will record all the TeX relevant
						files into a database that LaTeX then consults when compiling a <code>.tex</code> file.</p>
						<a href="#testing-noweb" id="testing-noweb" style="color: inherit; text-decoration: none;">
							<h2>Testing Noweb</h2>
						</a>
						<p>If installation went well, you can go to <code>/usr/local/noweb/examples/</code>, and try:</p>
						<pre><code class="language-bash"><span style="color: #000000">noweave primes.nw &gt; primes.tex</span>
<span style="color: #000000">latex primes.tex</span>
<span style="color: #000000">open primes.dvi</span>
</code></pre>
						<p>Alternatively, do <code>pdflatex primes.tex</code>, and open the resulting .pdf in whatever viewer you use.</p>
						<p>Here&#39;s an example of a simple <code>hello_in_c.nw</code> file containing C code:</p>
						<pre><code class="language-latex"><span style="color: #795E26">\section</span><span style="color: #000000">{A C example}</span>

<span style="color: #000000">&lt;&lt;hello.c&gt;&gt;=</span>
<span style="color: #000000">/*</span>
<span style="color: #000000">  &lt;&lt;license&gt;&gt;</span>
<span style="color: #000000">*/</span>
<span style="color: #000000">#include &lt;stdio.h&gt;</span>

<span style="color: #000000">int main(int argc, char *argv[]) {</span>
<span style="color: #000000">  printf(&quot;Hello World!\n&quot;);</span>
<span style="color: #000000">  return 0;</span>
<span style="color: #000000">}</span>
<span style="color: #000000">@</span>

<span style="color: #000000">\noindent and that&#039;s it.</span>
</code></pre>
						<p>Note how the code chunk is padded by some LaTeX code above and below, but <strong>there is no</strong> LaTeX preamble code, or <code>\documentclass</code> or <code>\begin{document}</code> or <code>\end{document}</code>. All of this is added automatically by <em>noweave</em> binary, as well as code for loading up the Noweb style file <code>\usepackage{noweb}</code>.</p>
						<p>Now we can weave this <code>.nw</code> file into a <code>.tex</code> file, compile it, and open the <code>.pdf</code>:</p>
						<pre><code class="language-bash"><span style="color: #000000">noweave hello_in_c.nw &gt; hello_in_c.tex</span>
<span style="color: #000000">latex hello_in_c.tex</span>
<span style="color: #000000">pdflatex hello_in_c.tex</span>
<span style="color: #000000">open hello_in_c.pdf</span>
</code></pre>
					</div>
				</div>
			</section>
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Classes</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-class tsd-parent-kind-module"><a href="../classes/codecs_nw.nwcodec.html" class="tsd-kind-icon">Nw<wbr>Codec</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Functions</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="codecs_nw.html#decodecodechunk" class="tsd-kind-icon">decode<wbr>Code<wbr>Chunk</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Functions</h2>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="decodecodechunk" class="tsd-anchor"></a>
					<h3>decode<wbr>Code<wbr>Chunk</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">decode<wbr>Code<wbr>Chunk<span class="tsd-signature-symbol">(</span>nw<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, defaultLanguage<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/06181986/src/codecs/nw/index.ts#L44">src/codecs/nw/index.ts:44</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Decode a Noweb code chunk to a LaTeX <code>lstlisting</code> environment.</p>
								</div>
								<p>Use <a href="https://regex101.com/r/MByuPq/1">https://regex101.com/r/MByuPq/1</a> for testing out the regex</p>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>nw: <span class="tsd-signature-type">string</span></h5>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagOptional">Optional</span> defaultLanguage: <span class="tsd-signature-type">string</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="../modules.html">Exports</a>
					</li>
					<li class="current tsd-kind-module">
						<a href="codecs_nw.html">codecs/nw</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class tsd-parent-kind-module">
						<a href="../classes/codecs_nw.nwcodec.html" class="tsd-kind-icon">Nw<wbr>Codec</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="codecs_nw.html#decodecodechunk" class="tsd-kind-icon">decode<wbr>Code<wbr>Chunk</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>