<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>codecs/ipynb | @stencila/encoda</title>
	<meta name="description" content="Documentation for @stencila/encoda">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
	<script async src="../assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">@stencila/encoda</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../modules.html">@stencila/encoda</a>
				</li>
				<li>
					<a href="codecs_ipynb.html">codecs/ipynb</a>
				</li>
			</ul>
			<h1>Module codecs/ipynb</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel tsd-comment">
				<div class="tsd-comment tsd-typography">
					<div class="lead">
						<a href="#jupyter-notebooks" id="jupyter-notebooks" style="color: inherit; text-decoration: none;">
							<h1>Jupyter Notebooks</h1>
						</a>
						<p>The <code>ipynb</code> codec is for decoding and encoding Jupyter Notebook&#39;s <code>nbformat</code> JSON. Jupyter Notebooks were formally known as IPython Notebooks, and correspondingly, usually having the <code>ipynb</code> filename extension.</p>
						<blockquote>
							<p>This codec is under development. It requires updating to the revised schemas for <code>CodeChunk</code>s in the <a href="https://github.com/stencila/schema/pull/132/files"><code>execution-engines</code> branch of <code>stencila/schema</code></a> e.g. addition of <code>errors</code> property. See the TODO:s in the code.</p>
						</blockquote>
						<a href="#typings" id="typings" style="color: inherit; text-decoration: none;">
							<h2>Typings</h2>
						</a>
						<p>This codec uses Typescript type definitions for <code>nbformat</code> versions <code>v3</code> and <code>v4</code> that are generated from the <code>nbformat</code> JSON schema definitions in the <a href="https://github.com/jupyter/nbformat/">https://github.com/jupyter/nbformat/</a> repository. See <a href="nbformat.js"><code>nbformat.js</code></a> for more details.</p>
						<p>These type definitions are used to improve type safety when encoding and decoding. We use the type names e.g. <code>MarkdownCell</code> in the documentation below.</p>
						<a href="#decoding" id="decoding" style="color: inherit; text-decoration: none;">
							<h2>Decoding</h2>
						</a>
						<p>Prior to decoding the contents of the notebook is validated against the <code>nbformat</code> JSON Schema version determined by the <code>nbformat</code> property of the notebook. All notebooks are decoded to a <code>Article</code>.</p>
						<a href="#metadata" id="metadata" style="color: inherit; text-decoration: none;">
							<h3>Metadata</h3>
						</a>
						<p>The only metadata specified in the <code>nbformat</code> JSON schema are <code>title</code> and <code>authors</code>, although arbitrary metadata can be added to a notebook&#39;s <code>metadata</code> property. During decoding, a notebook&#39;s <code>title</code> is mapped directly to the article&#39;s <code>title</code> property.</p>
						<p>In <code>nbformat v4</code>, a notebook&#39;s <code>authors</code> property is an array of <code>any</code> type. Users can add an author as a string, or an object with more structured metadata on the author. During, decoding this codec will handle each author, based on the type of data:</p>
						<ul>
							<li><code>string</code>s are decoded by the <a href="../person"><code>person</code> codec</a> into a <code>Person</code> node</li>
							<li><code>object</code>s are <code>coerce()</code>d to a <code>Person</code> node</li>
						</ul>
						<p>This allows for some flexibility for users when entering metadata (e.g. using a string instead of an object, using <code>lastName</code> instead of <code>familyName</code>) while still ensuring that it is consistent with the schema.org vocabulary and Stencila schema. All other data in the notebook&#39;s <code>metadata</code> is stored in the article&#39;s <code>meta</code> property.</p>
						<p>For example, the following notebook,</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;nbformat&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;nbformat_minor&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;metadata&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;title&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Article title&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;authors&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">      </span><span style="color: #A31515">&quot;Josiah Carberry PhD (http://library.brown.edu/about/hay/carberry.php)&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #A31515">&quot;Dr Jane Carberry &lt;jane.carberry@example.org&gt;&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      {</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;firstName&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Janet&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;lastName&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Carberry&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;affiliations&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Organization&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Brown University&quot;</span>
<span style="color: #000000">        },</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;favoriteColour&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;red&quot;</span>
<span style="color: #000000">      }</span>
<span style="color: #000000">    ],</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;arbitrary_metadata&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;provider&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Deep Thought&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;answer&quot;</span><span style="color: #000000">: </span><span style="color: #098658">42</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;cells&quot;</span><span style="color: #000000">: []</span>
<span style="color: #000000">}</span>
</code></pre>
						<p>is decoded to this <code>Article</code> with each author expanded to a <code>Person</code> node,</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Article&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;title&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Article title&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;authors&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Person&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;givenNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Josiah&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;familyNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Carberry&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;honorificSuffix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;PhD&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;url&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;http://library.brown.edu/about/hay/carberry.php&quot;</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Person&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;honorificPrefix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Dr&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;givenNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Jane&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;familyNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Carberry&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;emails&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;jane.carberry@example.org&quot;</span><span style="color: #000000">]</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Person&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;affiliations&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">        {</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Organization&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Brown University&quot;</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">      ],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;familyNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Carberry&quot;</span><span style="color: #000000">],</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;givenNames&quot;</span><span style="color: #000000">: [</span><span style="color: #A31515">&quot;Janet&quot;</span><span style="color: #000000">]</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  ],</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;meta&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;arbitrary_metadata&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;provider&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Deep Thought&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;answer&quot;</span><span style="color: #000000">: </span><span style="color: #098658">42</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;content&quot;</span><span style="color: #000000">: []</span>
<span style="color: #000000">}</span>
</code></pre>
						<a href="#cells" id="cells" style="color: inherit; text-decoration: none;">
							<h3>Cells</h3>
						</a>
						<p>The main content of a Jupyter Notebooks is in the <code>cells</code> array. These cells are of different types, the most commonly used types being <code>MarkdownCell</code> and <code>CodeCell</code>. All cells are decoded to nodes of type <code>BlockContent</code> in the <code>content</code> property of the <code>Article</code>.</p>
						<a href="#markdowncell-etc" id="markdowncell-etc" style="color: inherit; text-decoration: none;">
							<h4><code>MarkdownCell</code> etc</h4>
						</a>
						<p><code>MarkdownCell</code>s are decoding to an array of <code>BlockContent</code> nodes e.g. <code>Heading</code>, <code>Paragraph</code> etc. This is done by simply delegating to the <a href="../md"><code>md</code> codec</a>; see there for more details on the Markdown syntax supported. At present, there is no special handling of the Markdown content, although that could be added if there was a need to handle Markdown syntax that was common in Jupyter Notebooks (e.g. variable interpolation using double braces <code>{{}}</code>).</p>
						<p>In <code>v3</code> of the Jupyter Notebook format there are also cells of type <code>HeadingCell</code>, and of type <code>MarkdownCell</code> with <code>cell_type</code> set to <code>html</code>. These are decoded in a similar way to standard <code>MarkdownCells</code> - by delegating to the <code>md</code> and <code>html</code> codecs respectively to decode them into <code>BlockContent</code> nodes.</p>
						<a href="#codecell" id="codecell" style="color: inherit; text-decoration: none;">
							<h4><code>CodeCell</code></h4>
						</a>
						<p><code>CodeCell</code>s are decoded to a <code>CodeChunk</code>. The cell&#39;s <code>source</code> (<code>input</code> in <code>nbformat v3</code>) simply becomes the chunk&#39;s <code>text</code>. Properties of a cell that are not directly translatable e.g. <code>execution_count</code>, and any other data in the cell&#39;s <code>metadata</code>, are placed in the chunk&#39;s <code>meta</code> property.</p>
						<!-- TODO: Document how the `chunk.language` is set -->
						<p>The decoding of a <code>CodeCell</code>&#39;s <code>outputs</code> is a little more involved. In both <code>v3</code> and <code>v4</code> of <code>nbformat</code> this is an array of outputs of different types. The type names differ by schema version. In <code>v4</code>, they are <code>ExecuteResult</code>, <code>DisplayData</code>, <code>Stream</code> and <code>Error</code>.</p>
						<p><code>ExecuteResult</code> and <code>DisplayData</code> outputs have a <code>MimeBundle</code> which provides the output of the code cell as one or more media types. The <code>ipynb</code> codec attempts to decode the raw content of a <code>MimeBundle</code> into a semantic <code>Node</code> in the Stencila schema. This allows outputs to be used in other code chunks, or encoded in other formats.</p>
						<p>For instance, if a cell outputs a HTML table then it will be decoded to a <code>Table</code> node, which could then later be encoded as a table in Markdown, Microsoft Word or JATS. For example, this <code>CodeCell</code> which outputs the head of a Pandas data frame as HTML,</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;cell_type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;code&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;execution_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;metadata&quot;</span><span style="color: #000000">: {},</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    </span><span style="color: #A31515">&quot;df.head()&quot;</span>
<span style="color: #000000">  ],</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;outputs&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;data&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;output_type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;execute_result&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;text/html&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;&lt;div style=</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">max-height:1000px;max-width:1500px;overflow:auto;</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;&lt;table border=</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">1</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515"> class=</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">dataframe</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;  &lt;thead&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;    &lt;tr style=</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">text-align: right;</span><span style="color: #EE0000">\&quot;</span><span style="color: #A31515">&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;th&gt;&lt;/th&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;th&gt;YEAR&lt;/th&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;th&gt;SUNACTIVITY&lt;/th&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;    &lt;/tr&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;  &lt;/thead&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;  &lt;tbody&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;    &lt;tr&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;td&gt; 1700&lt;/td&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;      &lt;td&gt;  5&lt;/td&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;    &lt;/tr&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #A31515">&quot;    &lt;tr&gt;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">,</span>
</code></pre>
						<p>is decoded into a <code>CodeChunk</code> with a <code>Table</code> as output,</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;CodeChunk&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;meta&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;execution_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;text&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;df.head()&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;outputs&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Table&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;rows&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">        {</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;TableRow&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #0451A5">&quot;cells&quot;</span><span style="color: #000000">: [</span>
</code></pre>
						<p>For image media types (e.g. <code>image/png</code>), the content is decoded to an <code>ImageObject</code>.
						The Python library <code>matplotlib</code> is often used in Jupyter Notebooks. When using <code>matplotlib</code>, there is usually text output like <code>&lt;matplotlib.axes.AxesSubplot at 0xada0550&gt;</code> as an <code>ExecuteResult</code> alongside the <code>DisplayData</code> containing the actual image. This output is treated as an artifact and is not decoded into a Stencila <code>Node</code>. For example, this Jupyter Notebook <code>CodeCell</code>,</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;cell_type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;code&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;execution_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;metadata&quot;</span><span style="color: #000000">: {},</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    </span><span style="color: #A31515">&quot;df.plot(x=&#039;YEAR&#039;, y=&#039;SUNACTIVITY&#039;, xlim=(1700,2008))&quot;</span>
<span style="color: #000000">  ],</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;outputs&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">  {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;output_type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;execute_result&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;data&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;text/plain&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;&lt;matplotlib.axes.AxesSubplot at 0xada0550&gt;&quot;</span>
<span style="color: #000000">      ]</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;execution_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;metadata&quot;</span><span style="color: #000000">: {},</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;output_type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;display_data&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;data&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;image/png&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;iVBORw0KGgoAAAANSUhEUgAAAXYAAAEKCAYAAAAGvn7fAAAABH...&quot;</span>
</code></pre>
						<p>is decoded into this Stencila <code>CodeChunk</code> without the <code>matplotlib</code> text output:</p>
						<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;CodeChunk&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;meta&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">    </span><span style="color: #0451A5">&quot;execution_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;text&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;df.plot(x=&#039;YEAR&#039;, y=&#039;SUNACTIVITY&#039;, xlim=(1700,2008))&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;outputs&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;ImageObject&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;format&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;image/png&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;contentUrl&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;/tmp/ffbd2b7cdabce95b01e1f41834f90604.png&quot;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  ]</span>
<span style="color: #000000">}</span>
</code></pre>
						<p>The decoding of all other media types is delegated to other codecs by matching against their registered <code>mediaTypes</code> e.g. <code>text/html</code> is decoded by the <code>html</code> codec. For example, for <code>text/plain</code>, the <code>txt</code> codec is used which will decode to text to <code>null</code>, <code>boolean</code> and <code>number</code> nodes if possible.</p>
						<p>For <code>Stream</code> outputs, the output <code>text</code> is simply decoded to a <code>string</code> node.</p>
						<!-- TODO: Document error translation -->
						<a href="#encoding" id="encoding" style="color: inherit; text-decoration: none;">
							<h2>Encoding</h2>
						</a>
						<p>When encoding a Stencila <code>Node</code> to a Jupyter Notebook, if it is not an <code>Article</code>, then it is wrapped as necessary into an <code>Article</code>. Encoding then proceeds as pretty much the inverse of decoding.</p>
						<p>The area with the most asymetry between decoding and encoding, and the area with the greatest loss during round trip conversion, is <code>CodeCell</code> <code>outputs</code>. As explained above, this codec aims to infer a semantic node type from a <code>MimeBundle</code> (e.g. a <code>Table</code> from HTML) and ignores some content (e.g. <code>matplotlib</code> console output). There is no attempt to store either the raw content or the media types. Therefore, during encoding,</p>
						<ul>
							<li><code>string</code> nodes are encoded as the <code>text</code> property of <code>StreamOutput</code></li>
							<li><code>ImageObject</code> nodes are encoded as <code>DisplayData</code> outputs</li>
							<li>all other nodes are encoded as <code>ExecuteResult</code> outputs.</li>
						</ul>
						<p>After encoding, the contents of the generated notebook is validated against the <code>nbformat v4</code> JSON Schema.</p>
					</div>
				</div>
			</section>
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Classes</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-class tsd-parent-kind-module"><a href="../classes/codecs_ipynb.ipynbcodec.html" class="tsd-kind-icon">Ipynb<wbr>Codec</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Functions</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="codecs_ipynb.html#decodecodecell" class="tsd-kind-icon">decode<wbr>Code<wbr>Cell</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="codecs_ipynb.html#decodemultilinestring" class="tsd-kind-icon">decode<wbr>Multiline<wbr>String</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="codecs_ipynb.html#encodecodechunk" class="tsd-kind-icon">encode<wbr>Code<wbr>Chunk</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="codecs_ipynb.html#encodemultilinestring" class="tsd-kind-icon">encode<wbr>Multiline<wbr>String</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter"><a href="codecs_ipynb.html#isv3" class="tsd-kind-icon">isv3</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Functions</h2>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="decodecodecell" class="tsd-anchor"></a>
					<h3>decode<wbr>Code<wbr>Cell</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">decode<wbr>Code<wbr>Cell<span class="tsd-signature-symbol">(</span>cell<span class="tsd-signature-symbol">: </span><a href="../interfaces/codecs_ipynb_nbformat_v3.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a><span class="tsd-signature-symbol"> | </span><a href="../interfaces/codecs_ipynb_nbformat_v4.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a>, version<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">nbformat.Version</span>, language<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">schema.CodeChunk</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">&gt;</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/225cec4b/src/codecs/ipynb/index.ts#L470">src/codecs/ipynb/index.ts:470</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Decode a Jupyter <code>CodeCell</code> to a Stencila <code>CodeChunk</code>.</p>
								</div>
								<p>If the cell has no code and no outputs then returns <code>undefined</code> (ie.
								empty cells are ignored).</p>
								<p>If the cell metadata has a <code>caption</code> that is a string it will be attempted
								to be decoded as Markdown.</p>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>cell: <a href="../interfaces/codecs_ipynb_nbformat_v3.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a><span class="tsd-signature-symbol"> | </span><a href="../interfaces/codecs_ipynb_nbformat_v4.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a></h5>
								</li>
								<li>
									<h5>version: <span class="tsd-signature-type">nbformat.Version</span><span class="tsd-signature-symbol"> = 4</span></h5>
								</li>
								<li>
									<h5>language: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = &#x27;python&#x27;</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">schema.CodeChunk</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">&gt;</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="decodemultilinestring" class="tsd-anchor"></a>
					<h3>decode<wbr>Multiline<wbr>String</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">decode<wbr>Multiline<wbr>String<span class="tsd-signature-symbol">(</span>source<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">nbformat.MultilineString</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/225cec4b/src/codecs/ipynb/index.ts#L804">src/codecs/ipynb/index.ts:804</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Decode a Jupyter <code>MultilineString</code> to a <code>string</code>.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>source: <span class="tsd-signature-type">nbformat.MultilineString</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="encodecodechunk" class="tsd-anchor"></a>
					<h3>encode<wbr>Code<wbr>Chunk</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">encode<wbr>Code<wbr>Chunk<span class="tsd-signature-symbol">(</span>chunk<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">schema.CodeChunk</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/codecs_ipynb_nbformat_v4.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a><span class="tsd-signature-symbol">&gt;</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/225cec4b/src/codecs/ipynb/index.ts#L516">src/codecs/ipynb/index.ts:516</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Encode a Stencila <code>CodeChunk</code> as a Jupyter <code>CodeCell</code>.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>chunk: <span class="tsd-signature-type">schema.CodeChunk</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/codecs_ipynb_nbformat_v4.codecell.html" class="tsd-signature-type" data-tsd-kind="Interface">CodeCell</a><span class="tsd-signature-symbol">&gt;</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="encodemultilinestring" class="tsd-anchor"></a>
					<h3>encode<wbr>Multiline<wbr>String</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">encode<wbr>Multiline<wbr>String<span class="tsd-signature-symbol">(</span>source<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">nbformat.MultilineString</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/225cec4b/src/codecs/ipynb/index.ts#L813">src/codecs/ipynb/index.ts:813</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Encode a <code>string</code> as a Jupyter <code>MultilineString</code>.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>source: <span class="tsd-signature-type">string</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">nbformat.MultilineString</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter">
					<a name="isv3" class="tsd-anchor"></a>
					<h3>isv3</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter">
						<li class="tsd-signature tsd-kind-icon">isv3&lt;Key&gt;<span class="tsd-signature-symbol">(</span>node<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">unknown</span>, key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Key</span>, version<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">nbformat.Version</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">node</span><span class="tsd-signature-symbol"> is </span><span class="tsd-signature-type">Types</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-type">Key</span><span class="tsd-signature-symbol">]</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/stencila/encoda/blob/225cec4b/src/codecs/ipynb/index.ts#L98">src/codecs/ipynb/index.ts:98</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Type guard for letting Typescript know that node is a v3 type</p>
								</div>
							</div>
							<h4 class="tsd-type-parameters-title">Type parameters</h4>
							<ul class="tsd-type-parameters">
								<li>
									<h4>Key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">keyof </span><span class="tsd-signature-type">Types</span></h4>
								</li>
							</ul>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>node: <span class="tsd-signature-type">unknown</span></h5>
								</li>
								<li>
									<h5>key: <span class="tsd-signature-type">Key</span></h5>
								</li>
								<li>
									<h5>version: <span class="tsd-signature-type">nbformat.Version</span></h5>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">node</span><span class="tsd-signature-symbol"> is </span><span class="tsd-signature-type">Types</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-type">Key</span><span class="tsd-signature-symbol">]</span></h4>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="../modules.html">Modules</a>
					</li>
					<li class="current tsd-kind-module">
						<a href="codecs_ipynb.html">codecs/ipynb</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class tsd-parent-kind-module">
						<a href="../classes/codecs_ipynb.ipynbcodec.html" class="tsd-kind-icon">Ipynb<wbr>Codec</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="codecs_ipynb.html#decodecodecell" class="tsd-kind-icon">decode<wbr>Code<wbr>Cell</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="codecs_ipynb.html#decodemultilinestring" class="tsd-kind-icon">decode<wbr>Multiline<wbr>String</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="codecs_ipynb.html#encodecodechunk" class="tsd-kind-icon">encode<wbr>Code<wbr>Chunk</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="codecs_ipynb.html#encodemultilinestring" class="tsd-kind-icon">encode<wbr>Multiline<wbr>String</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter">
						<a href="codecs_ipynb.html#isv3" class="tsd-kind-icon">isv3</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>